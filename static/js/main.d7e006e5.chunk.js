(this["webpackJsonpsd-0x-project-frontend-online-store"]=this["webpackJsonpsd-0x-project-frontend-online-store"]||[]).push([[0],{25:function(t,e,a){t.exports=a(42)},30:function(t,e,a){},31:function(t,e,a){},41:function(t,e,a){},42:function(t,e,a){"use strict";a.r(e);var n=a(0),r=a.n(n),c=a(23),o=a.n(c),i=(a(30),a(13)),u=a(17),s=a(4),l=a(5),d=a(15),m=a(7),p=a(6),h=a(10),b=a(1),f=(a(31),a(3)),v=a.n(f),E=a(12),j=a(18),C=function(t){Object(m.a)(a,t);var e=Object(p.a)(a);function a(t){var n;return Object(s.a)(this,a),(n=e.call(this,t)).state={},n}return Object(l.a)(a,[{key:"render",value:function(){var t=this.props,e=t.handleInput,a=t.handleClick;return r.a.createElement("div",{className:"header"},r.a.createElement("input",{id:"input-search",className:"input-search",type:"text",placeholder:"busca","data-testid":"query-input",onChange:e}),r.a.createElement("button",{"data-testid":"query-button",onClick:a,type:"button"},"Search"),r.a.createElement(h.b,{to:"/shopping-cart","data-testid":"shopping-cart-button",className:"shopping-cart-button"},r.a.createElement(j.a,null)),r.a.createElement("p",{className:"home-initial-message","data-testid":"home-initial-message"},"Digite algum termo de pesquisa ou escolha uma categoria."))}}]),a}(n.Component),O=function(t){Object(m.a)(a,t);var e=Object(p.a)(a);function a(){return Object(s.a)(this,a),e.apply(this,arguments)}return Object(l.a)(a,[{key:"render",value:function(){var t=this.props,e=t.products,a=t.onClick;return r.a.createElement(r.a.Fragment,null,e.map((function(t){return r.a.createElement("div",{"data-testid":"product",className:"product-item",key:t.id},r.a.createElement(h.b,{"data-testid":"product-detail-link",to:"details/".concat(t.id),key:"".concat(t.title)},r.a.createElement("h3",null,t.title),r.a.createElement("img",{width:"200px",src:t.thumbnail,alt:t.title}),r.a.createElement("p",null,"R$",t.price)),t.shipping.free_shipping?r.a.createElement("p",null,"Frete Gr\xe1tis"):null,r.a.createElement("button",{"data-testid":"product-add-to-cart",type:"button",onClick:function(){return a(t)}},"Adicionar ao carrinho"))})))}}]),a}(n.Component);function g(){return k.apply(this,arguments)}function k(){return(k=Object(E.a)(v.a.mark((function t(){var e,a;return v.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch("https://api.mercadolibre.com/sites/MLB/categories");case 2:return e=t.sent,t.next=5,e.json();case 5:return a=t.sent,t.abrupt("return",a);case 7:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function y(t,e){return I.apply(this,arguments)}function I(){return(I=Object(E.a)(v.a.mark((function t(e,a){var n,r;return v.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch("https://api.mercadolibre.com/sites/MLB/search?category=".concat(e,"&q=").concat(a));case 2:return n=t.sent,r=n.json(),t.abrupt("return",r);case 5:case"end":return t.stop()}}),t)})))).apply(this,arguments)}a(41);var x=function(t){Object(m.a)(a,t);var e=Object(p.a)(a);function a(){var t;return Object(s.a)(this,a),(t=e.call(this)).fetchCategories=Object(E.a)(v.a.mark((function e(){var a;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g();case 2:a=e.sent,t.setState({categories:a});case 4:case"end":return e.stop()}}),e)}))),t.state={categories:[]},t}return Object(l.a)(a,[{key:"componentDidMount",value:function(){this.fetchCategories()}},{key:"render",value:function(){var t=this.state.categories,e=this.props.checked;return r.a.createElement("div",null,t.map((function(t){var a=t.id,n=t.name;return r.a.createElement("li",{key:a},r.a.createElement("label",{htmlFor:a},r.a.createElement("input",{"data-testid":"category",type:"radio",id:a,name:"categories",onChange:e,value:a}),n))})))}}]),a}(n.Component),w=function(t){Object(m.a)(a,t);var e=Object(p.a)(a);function a(t){var n;return Object(s.a)(this,a),(n=e.call(this,t)).handleChecked=function(t){var e=t.target.id,a=n.state.search;n.setState({categoryId:e}),n.handleCheckedSearch(e,a)},n.handleInput=function(t){var e=t.target.value;n.setState({search:e})},n.handleCheckedSearch=function(){var t=Object(E.a)(v.a.mark((function t(e,a){var r;return v.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,y(e,a);case 2:(r=t.sent)&&(r.results.length>0?n.setState({products:r.results,noProducts:!1}):n.setState({noProducts:!0}));case 4:case"end":return t.stop()}}),t)})));return function(e,a){return t.apply(this,arguments)}}(),n.state={noProducts:!1,products:[],categoryId:"",search:""},n}return Object(l.a)(a,[{key:"render",value:function(){var t=this,e=this.state,a=e.products,n=e.noProducts,c=e.categoryId,o=e.search,i=this.props.onClick;return r.a.createElement("div",null,r.a.createElement(C,{handleInput:this.handleInput,handleClick:function(){return t.handleCheckedSearch(c,o)}}),r.a.createElement("div",{className:"home"},r.a.createElement("div",{className:"categories"},r.a.createElement(x,{checked:this.handleChecked})),r.a.createElement("div",{className:"product-list"},n?r.a.createElement("p",null,"Nenhum produto encontrado"):r.a.createElement(O,{products:a,onClick:i}))))}}]),a}(n.Component),S=function(t){Object(m.a)(a,t);var e=Object(p.a)(a);function a(t){var n;Object(s.a)(this,a),(n=e.call(this,t)).requestDetails=Object(E.a)(v.a.mark((function t(){var e,a,r;return v.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=n.state.productId,t.next=3,fetch("https://api.mercadolibre.com/items/".concat(e));case 3:return a=t.sent,t.next=6,a.json();case 6:r=t.sent,n.setState({product:r});case 8:case"end":return t.stop()}}),t)})));var r=n.props.match.params.id;return n.state={product:[],productId:r},n}return Object(l.a)(a,[{key:"componentDidMount",value:function(){this.requestDetails()}},{key:"render",value:function(){var t=this.state.product,e=t.title,a=t.thumbnail,n=t.price,c=t.warranty,o=this.props.onClick;return r.a.createElement("div",null,r.a.createElement(h.b,{to:"/shopping-cart","data-testid":"shopping-cart-button",className:"shopping-cart-button"},r.a.createElement(j.a,null)),r.a.createElement("h3",null,"Especifica\xe7\xf5es T\xe9cnicas"),r.a.createElement("h3",{"data-testid":"product-detail-name"},e),r.a.createElement("img",{src:a,alt:e}),r.a.createElement("p",null,"R$",n),r.a.createElement("button",{"data-testid":"product-detail-add-to-cart",type:"button",onClick:function(){return o(t)}},"Adicionar ao carrinho"),r.a.createElement("p",null,c),r.a.createElement("form",{action:"GET"},r.a.createElement("label",{htmlFor:"product_rating"},r.a.createElement("input",{id:"product_rating",type:"number",step:1,min:0,required:!0})),r.a.createElement("label",{htmlFor:"product_comments"},r.a.createElement("textarea",{id:"product_comments","data-testid":"product-detail-evaluation",cols:"20"}))),r.a.createElement(h.b,{to:"/"},"Voltar para a tela inicial"))}}]),a}(n.Component),N=function(t){Object(m.a)(a,t);var e=Object(p.a)(a);function a(){return Object(s.a)(this,a),e.apply(this,arguments)}return Object(l.a)(a,[{key:"render",value:function(){var t=this.props,e=t.product,a=t.addCart,n=t.removeItemCart,c=t.removeCart,o=e.title,i=e.price,u=e.thumbnail,s=e.countItems;return r.a.createElement("div",null,r.a.createElement("p",{"data-testid":"shopping-cart-product-name"},o),r.a.createElement("img",{src:u,alt:o}),r.a.createElement("p",null,"R$",i),r.a.createElement("button",{type:"button","data-testid":"product-increase-quantity",onClick:function(){return a(e)}},"+"),r.a.createElement("p",{"data-testid":"shopping-cart-product-quantity"},"Quantidade de itens: ".concat(s)),r.a.createElement("button",{type:"button","data-testid":"product-decrease-quantity",onClick:function(){return n(e)}},"-"),r.a.createElement("button",{type:"button",onClick:function(){return c(e)}},"X"))}}]),a}(n.Component),q=function(t){Object(m.a)(a,t);var e=Object(p.a)(a);function a(t){var n;return Object(s.a)(this,a),(n=e.call(this,t)).amount=function(){var t=n.props.cartItems;t.length>=1&&n.setState({total:t.reduce((function(t,e){return(t+e.price)*e.countItems}),0)})},n.state={total:0},n}return Object(l.a)(a,[{key:"componentDidMount",value:function(){this.amount()}},{key:"componentDidUpdate",value:function(t){t!==this.props&&this.amount()}},{key:"render",value:function(){var t=this.props,e=t.cartItems,a=t.addCart,n=t.removeItemCart,c=t.removeCart,o=this.state.total;return 0===e.length?r.a.createElement("div",null,r.a.createElement("p",{"data-testid":"shopping-cart-empty-message"},"Seu carrinho est\xe1 vazio"),r.a.createElement("div",null,r.a.createElement(h.b,{to:"/"},"Voltar para a tela inicial"))):r.a.createElement("div",null,r.a.createElement("div",null,e.length),r.a.createElement("ul",null,e.map((function(t){return r.a.createElement("li",{key:t.id},r.a.createElement(N,{addCart:a,removeItemCart:n,removeCart:c,product:t}))}))),r.a.createElement("p",null,"Valor total:",o),r.a.createElement("button",{type:"button"},"Finalizar compras"),r.a.createElement("div",null,r.a.createElement(h.b,{to:"/"},"Voltar para a tela inicial")))}}]),a}(n.Component),D=function(t){Object(m.a)(a,t);var e=Object(p.a)(a);function a(){var t;return Object(s.a)(this,a),(t=e.call(this)).handlecartItemsItem=function(e){t.setState((function(t){return{cartItems:[].concat(Object(u.a)(t.cartItems),[e])}}))},t.addCart=t.addCart.bind(Object(d.a)(t)),t.removeItemCart=t.removeItemCart.bind(Object(d.a)(t)),t.removeCart=t.removeCart.bind(Object(d.a)(t)),t.state={cartItems:[]},t}return Object(l.a)(a,[{key:"addCart",value:function(t){this.setState((function(e){return{cartItems:e.cartItems.find((function(e){return e.id===t.id}))?e.cartItems.map((function(e){return e.id===t.id?Object(i.a)(Object(i.a)({},e),{},{countItems:e.countItems+1}):e})):[].concat(Object(u.a)(e.cartItems),[Object(i.a)(Object(i.a)({},t),{},{countItems:1})])}}))}},{key:"removeItemCart",value:function(t){this.setState((function(e){return{cartItems:e.cartItems.some((function(e){return e.id===t.id}))?e.cartItems.map((function(e){return e.id===t.id&&e.countItems?Object(i.a)(Object(i.a)({},e),{},{countItems:e.countItems-1}):e})):[].concat(Object(u.a)(e.cartItems),[Object(i.a)(Object(i.a)({},t),{},{countItems:1})])}}))}},{key:"removeCart",value:function(t){this.setState((function(e){var a=Object(u.a)(e.cartItems),n=a.findIndex((function(e){return e.id===t.id}));return a.splice(n,1),{cartItems:a}}))}},{key:"render",value:function(){var t=this,e=this.state.cartItems;return r.a.createElement("div",{className:"App"},r.a.createElement(h.a,null,r.a.createElement(b.c,null,r.a.createElement(b.a,{exact:!0,path:"/",render:function(){return r.a.createElement(w,{onClick:t.addCart})}}),r.a.createElement(b.a,{exact:!0,path:"/shopping-cart",render:function(a){return r.a.createElement(q,Object.assign({},a,{addCart:t.addCart,removeItemCart:t.removeItemCart,removeCart:t.removeCart,cartItems:e}))}}),r.a.createElement(b.a,{exact:!0,path:"/details/:id",render:function(e){return r.a.createElement(S,Object.assign({},e,{onClick:t.addCart}))}}))))}}]),a}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(D,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(t){t.unregister()})).catch((function(t){console.error(t.message)}))}},[[25,1,2]]]);
//# sourceMappingURL=main.d7e006e5.chunk.js.map